

# Web Storage



컴퓨터(특히 브라우저)에서 데이터를 **일시적 또는 영구적으로 보존하기 위한 저장 공간**
</aside>

스토리지는 클라이언트(브라우저) 내부에 데이터를 보관하는 기술이다.
하지만 **서버와 클라이언트 간의 상태(state)를 유지하기 위한 수단은 아니다.**
즉, HTTP의 상태를 기억하기 위해 사용하는 **쿠키(stateful HTTP)** 와는 목적이 다르다.


### 키워드

* 데이터 저장소
* 클라이언트 측 보관
* 재사용 가능한 브라우저 데이터 공간

---

## 특징

### 배경

쿠키가 원래 **서버-클라이언트 상태 유지용**으로 만들어졌지만,
개발자들이 점점 쿠키에 **데이터 저장소처럼 남용**하기 시작했다.
(예: 로그인 정보, 사용자 설정 등 모든 데이터를 쿠키에 저장)

이로 인해 쿠키의 용량 제한(약 4KB), 보안 문제, 네트워크 부하가 커졌다.

→ 이런 문제를 해결하기 위해 **Web Storage (웹 스토리지)** 가 등장했다.


### 사용 목적

스토리지는 **데이터를 저장하고 관리하기 위한 목적**으로 설계되었다.
즉, **항상 서버로 전달할 필요가 없는 데이터**를 브라우저 내부에서 안전하게 저장한다.

<aside>
🔥  
스토리지는 서버와의 통신보다는,  
클라이언트 측에서 응답받은 데이터나  
사용자가 직접 생성한 데이터를 보관하고 재사용하기 위한 공간이다.
</aside>


## 쿠키와 스토리지의 차이

* **쿠키(Cookie)**

    * 서버와 클라이언트 간 **상태 유지를 위한 용도**
    * 모든 HTTP 요청마다 **자동으로 서버로 전송됨**
    * 용량이 작고(4KB), 네트워크 부하 발생
    * 로그인 세션 유지, 인증 토큰 전달 등에서 사용

* **스토리지(Storage)**

    * 브라우저 내부에 존재하는 **데이터 보관소**
    * HTTP 요청에 **자동으로 포함되지 않음**
    * 단순히 **저장과 조회만 가능**
    * 클라이언트 측에서 **자주 조회되는 데이터나 UI 상태**를 관리하기에 적합

> 예를 들어, 쿠키는 “로그인 상태를 유지하기 위해 세션ID를 저장”하고,
> 스토리지는 “마지막으로 선택한 테마 색상, 사용자 설정” 등을 저장한다.

---

## 종류

스토리지는 **유효기간**에 따라 두 가지로 나뉜다.


> ### Local Storage (로컬 스토리지)

* **데이터가 영구적으로 저장**된다.
* 브라우저를 종료하거나 PC를 꺼도 사라지지 않는다.
* 일반적으로 **로그인 방식, 사용자 설정, UI 상태 등**을 보관할 때 사용한다.
* 단, 너무 많은 데이터를 저장하면 브라우저 성능이 저하될 수 있다.

- 예시: 사용자가 마지막으로 로그인한 계정, 언어 설정, 테마 모드 등을 저장

그래서 많은 개발자들이 JWT 토큰을 이 공간에 저장하기도 하지만,
**보안상(탈취 위험)** 으로 인해 로그인 토큰은 보통 쿠키나 세션에 저장하는 것이 더 안전하다.

---

> ### Session Storage (세션 스토리지)

* **브라우저 창(탭)을 닫으면 데이터가 삭제된다.**
* 세션(탭) 동안만 유지되는 일시적 저장 공간이다.
* 같은 브라우저의 다른 탭과는 공유되지 않는다.
* 페이지 새로고침(F5) 시에는 유지된다.

- 예시: 사용자가 현재 진행 중인 폼 입력 데이터, 임시 검색 키워드 저장 등에 활용

---

## 저장 위치

* **쿠키 (Cookie)**
  `~/Library/Application Support/Google/Chrome/Default/Cookies`
  (SQLite 형식)

* **LocalStorage (로컬 스토리지)**
  `~/Library/Application Support/Google/Chrome/Default/Local Storage/leveldb/`
  (최신 버전은 LevelDB 사용)

* **SessionStorage (세션 스토리지)**
  브라우저 탭 메모리에 저장되며, 탭 종료 시 함께 사라짐.

* **IndexedDB**
  `~/Library/Application Support/Google/Chrome/Default/IndexedDB/`

* **Cache Storage / Service Worker**
  `~/Library/Application Support/Google/Chrome/Default/Service Worker/`
  및 `Cache/` 디렉토리 내 저장

---

## 정리

- 스토리지는 브라우저 안에서 동작하는 **데이터 전용 보관함**이다.
- HTTP 요청 시 자동으로 서버로 전송되지 않으며, 오직 클라이언트 내부에서만 접근 가능하다.

> * **쿠키**는 서버와의 “상태 유지”용,
> * **스토리지는** 브라우저의 “데이터 저장”용이다.

