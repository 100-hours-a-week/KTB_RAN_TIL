
# DNS (Domain Name System)

---

### 정의

<aside>
DNS (Domain Name System) 도메인 이름을 IP 주소와 연결하는 인터넷의 전화번호부 시스템 → 사용자가 `yong.kr`처럼 사람이 읽을 수 있는 주소로 요청하면,  
DNS가 이를 실제 서버의 IP 주소로 변환해준다.
</aside>

**키워드**

도메인 이름 / IP 주소 / 네임 서버 / 리졸버 / 루트 DNS / TLD DNS / Authoritative DNS / 캐시 / 계층적 구조

---

### DNS 비유로 이해하기

DNS를 사람 사이의 ‘우편 시스템’에 비유할 수 있다.
클라이언트(장군)가 서버(왕)에게 바로 요청을 보내는 것이 아니라,
**여러 단계의 우체국(중간 DNS 서버)** 을 거쳐 실제 목적지까지 찾아가는 과정이다.

* **장군(클라이언트)** : 웹 브라우저, 사용자의 요청 주체
* **전초기지(Resolver)** : 클라이언트 대신 주소를 찾아주는 ‘지역 정보 사무소’
* **만국 우편 연합 (Root DNS)** : 전세계 도메인 체계를 관리하는 최상위 기관
* **주소 등록 대행소 (TLD DNS)** : `.kr`, `.com`, `.org` 등 상위 도메인 관리
* **주소 관리 기관 (Authoritative DNS)** : 실제 도메인(yong.kr)의 IP 주소를 보유
* **왕(서버)** : 최종 목적지 — 요청을 처리하고 응답을 반환

---

### 실제 비유 과정으로 보기

> **시종은 왜 1번 루트 서버까지 가야 했을까?**
>
> 내가 가진 주소(“청라”)가 **국제 표준 주소 형식**인지 확인하기 위해서이다.
> 즉, ‘청라’라는 지역이 전세계적으로 어떤 표기 규칙을 따르는지 확인하고,
> 국제적으로 통용되는 형태(“인천광역시 서구 청라”)로 변환해야 한다.

이 과정을 기술적으로 풀면 아래와 같다.

---

### yong.kr 도메인을 찾는 실제 흐름

1. **사용자(클라이언트, 병사)**
   → “`yong.kr` 어디 있어요?” 하고 **전초기지(Resolver)** 에게 물어본다.

2. **전초기지 (Resolver / 캐싱 DNS 서버)**
   → 자신이 알고 있는 캐시에 IP가 있으면 바로 알려준다.
   → 없으면 상위기관(Root DNS)에 대신 물어본다.

3. **① 만국 우편 연합 (Root DNS, 국제 표준 관리)**
   → “`.kr` 도메인은 한국 주소 관리소(TLD DNS)로 가봐.” 하고 안내한다.

4. **② 주소 등록 대행소 (TLD DNS, .kr 네임서버)**
   → “`yong.kr`이라는 도메인은 이 기관이 관리해요.” 하며 **권한 있는 서버 주소**를 알려준다.

5. **③ 주소 관리 기관 (Authoritative DNS, 권한 서버)**
   → “`yong.kr`의 실제 위치(IP 주소)는 `203.0.113.5`입니다.” 라고 최종 IP를 반환한다.

6. **클라이언트가 실제 서버(IP)로 접속**
   → 이제 브라우저가 해당 IP를 이용해 `yong.kr` 웹 서버에 연결된다.

---

### DNS 용어 정리

| 용어                                 | 설명                                               |
| ---------------------------------- | ------------------------------------------------ |
| **DNS (Domain Name System)**       | 사람이 읽는 도메인 이름을 컴퓨터가 이해할 수 있는 IP 주소로 변환하는 시스템     |
| **DNS 서버**                         | 도메인 이름과 IP 주소를 매핑하는 데이터베이스를 운영하는 서버              |
| **리졸버(Resolver)**                  | 사용자의 요청을 받아 DNS 서버에 질의하고, 응답 결과(IP)를 반환하는 역할     |
| **루트 DNS (Root DNS)**              | 전 세계 도메인 체계의 최상위 계층 서버 (.com, .kr 등 TLD를 관리하는 곳) |
| **TLD DNS (Top-Level Domain DNS)** | `.com`, `.kr`, `.net` 등 상위 도메인을 관리하는 서버          |
| **Authoritative DNS (권한 서버)**      | 특정 도메인(yong.kr)의 실제 IP 주소를 보유한 서버                |
| **캐시(Cache)**                      | 이전 조회 결과(IP)를 저장해, 다음 요청 시 빠르게 응답할 수 있도록 함       |

---

### 로컬 DNS란?

로컬 DNS는 **사용자와 가장 가까운 DNS 서버**이다.
즉, “동네 우체국” 같은 존재다.

* 캐시에 IP가 있으면 바로 결과를 반환
* 캐시에 없으면 루트 DNS → TLD DNS → 권한 DNS 순으로 조회
* 최종 IP를 얻으면 클라이언트에 전달하고 일정 기간 캐시에 저장한다

로컬 DNS는 보통 ISP(인터넷 제공자)가 운영하며,
“내 컴퓨터 내부”가 아니라 “내 지역 네트워크 근처”에 위치한다.

---

### 루트 DNS (Root DNS)

전 세계 도메인 네임 시스템의 **최상위 계층**에 있는 서버이다.
모든 DNS 질의는 궁극적으로 루트 서버에서 출발하며,
TLD(.com, .kr 등) 서버의 위치 정보를 관리한다.

---

### DNS 캐시(Cache)가 저장되는 위치

1. **브라우저 캐시 (로컬 PC)**

   * 최근 방문한 도메인의 IP 주소를 잠시 저장
2. **로컬 DNS 서버 캐시 (ISP DNS)**

   * 여러 사용자의 질의 결과를 저장 → 트래픽 절감
3. **프록시 / 게이트웨이 / 로드 밸런서 캐시**

   * 중간 네트워크 계층에서도 DNS 응답을 저장해 응답 속도를 높임

---

### 나만의 DNS 요청 흐름 정리 (비유 기반 요약)


1. 클라이언트(장군)가 “yong.kr” 주소를 알고 싶어 한다.
2. 전초기지(Resolver)가 캐시에서 찾아보지만 없어서 상위 기관에 문의한다.
3. 루트 DNS(만국 우편 연합)가 “`.kr`은 한국 관리소로 가라”고 안내한다.
4. `.kr` TLD DNS(주소 대행소)가 “`yong.kr`은 이 기관이 관리한다”고 알려준다.
5. Authoritative DNS(주소 관리 기관)가 “`yong.kr`의 IP는 203.0.113.5”라고 답한다.
6. 전초기지는 이 IP를 캐시에 저장하고 클라이언트에 알려준다.
7. 클라이언트는 그제서야 실제 웹 서버(yong.kr)에 접근해 응답을 받는다.

---

### 요약 정리

* **DNS는 사람이 이해하기 쉬운 도메인 이름을 컴퓨터가 이해할 수 있는 IP 주소로 변환하는 시스템이다.**
* **계층 구조** : Root → TLD → Authoritative
* **리졸버(Resolver)** 가 중계자 역할을 수행
* **로컬 DNS 서버**는 캐시를 통해 속도 향상
* **결과적으로** 브라우저는 도메인 이름을 IP로 변환한 뒤,
  해당 IP 주소로 TCP 연결을 맺고 HTTP 요청을 보낸다.

