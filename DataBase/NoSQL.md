
# NoSQL (Not Only SQL)

  
**SQL만 사용하지 않는 유형의 데이터베이스.**  
즉, 전통적인 관계형 데이터베이스(RDBMS)처럼 **고정된 스키마와 SQL 문법에 얽매이지 않는 DB**를 말한다.
</aside>


---

## 특징

NoSQL은 기존 **RDBMS와의 차이**,
그리고 **왜 필요한지(등장 배경)** 를 이해해야 한다.

* 전통적인 RDBMS는 **스키마 기반** 구조이다.
  → 테이블에 데이터를 넣기 위해 **정해진 형식과 제약**을 반드시 따라야 한다.
* 반면 NoSQL은 **스키마가 유연하거나 아예 없는 구조**로
  다양한 형태의 데이터를 자유롭게 저장할 수 있다.


### 왜 유연한 데이터 구조가 필요한가?

* 데이터의 형태가 단일하지 않고 다양해졌기 때문이다.
* 정형 데이터뿐 아니라 **비정형(이미지, 로그, 센서 데이터)**,
  **반정형(JSON, XML 등)** 데이터의 등장.

> #### 데이터의 다양성

* 쇼핑몰 고객 정보, 주문 내역 → 정형 데이터 (RDBMS에 적합)
* SNS 게시물, 로그, 채팅 메시지 → 비정형 / 반정형 데이터 (NoSQL에 적합)


### 대규모 데이터 처리

NoSQL은 “사용자 데이터” 뿐만 아니라
**분석·로그·이벤트** 같은 **대규모 데이터 처리용**으로 설계되었다.

→ 방대한 양의 데이터를 빠르게 쓰고 읽기 위한 구조가 핵심이다.

---

###  수평적 확장성 (Scalability)

* **수직 확장(Scale-up)**

    * 서버 성능(사양)을 올리는 방식
    * 하지만 하드웨어 한계와 비용 문제 발생
* **수평 확장(Scale-out)**

    * 동일한 사양의 서버를 여러 대 추가하여 처리 분산
    * NoSQL은 기본적으로 **수평 확장에 최적화**

> ❓**RDBMS가 뭔데?**
> Relational Database Management System — 관계형 데이터베이스.
> 데이터를 테이블과 관계(Foreign Key)로 관리하는 방식.
> 대표적으로 MySQL, PostgreSQL, Oracle, SQL Server 등.



### 실제 사용 예시 (유형별 모델)

NoSQL은 “비정형/반정형 데이터를 어떻게 다루느냐”에 따라 여러 모델로 나뉜다.

---

### 1. Key-Value Store (키-값 저장소)

* 예시 언어: Java → `HashMap`, Python → `dict`
* 내부 동작: **해시 함수(Hash Function)** 를 통해 키를 특정 위치에 매핑
* **탐색 속도:** O(1) — 데이터 양이 많아도 일정한 시간으로 빠름

**특징**

* 압도적인 속도
* 캐시 서버, 세션 저장 등에 적합
* **Redis** 가 대표적 (1등급 캐시)
* **리스트, 셋, 해시 자료구조**를 값으로 가질 수 있음
* **인메모리 기반**이므로 매우 빠르지만,
  필요 시 데이터를 **영속 저장(Persistence)** 할 수 있음.

> ❓**인메모리란?**
> 데이터를 디스크가 아니라 **RAM(메모리)** 에 저장하는 방식.
> CPU가 직접 접근 가능하므로 속도가 매우 빠르지만, 휘발성(Volatile)이다.
> Redis는 이를 보완해 “인메모리 + 디스크 백업”을 동시에 지원한다.

---

### 2. Document-Oriented DB (문서 지향 데이터베이스)

* Key-Value에서 발전된 형태로 **JSON / XML 문서 단위**로 데이터를 저장.
* 각 문서는 고유한 Key를 갖고, 내부 필드도 인덱스로 빠르게 접근 가능.
* 여러 필드를 **하나의 문서(document)** 로 함께 관리하므로
  **JOIN 없이 한 번의 읽기 작업으로 데이터 접근 가능.**

**예시:** MongoDB

> ❓“SQL 필드를 JSON으로 설정하면 NoSQL처럼 쓸 수 있지 않을까?”
> 가능은 하지만 비효율적이다.
> SQL 기반 엔진은 정규화된 테이블 설계를 전제로 동작하기 때문.

---

### 3. Column-Based DB (컬럼 지향 데이터베이스)

* RDBMS가 행(Row) 단위로 저장한다면,
  컬럼 기반 DB는 **열(Column) 단위**로 저장한다.

#### Row 기반

```
[1, '서상기', 20, '서울']
[2, '김감튀', 30, '대전']
[3, '김콜라', 40, '부산']
```

* 평균 나이를 계산하려면 모든 행을 읽어야 함 → 비효율적.

#### Column 기반

```
[1, 2, 3]
['서상기', '김감튀', '김콜라']
[20, 30, 40]
```

* 나이 컬럼만 조회 가능 → **집계 연산에 효율적**.
* 단, 특정 사용자의 전체 정보를 조회할 때는 **행 조립 과정 필요.**

**사용처:**

* 데이터 분석, 로그 저장, 빅데이터 처리, 시간대별 접속자 수 등
* 대표 DB: Cassandra, HBase

---

### 4. Graph DB (그래프 데이터베이스)

* **데이터 간 관계**에 초점을 맞춘 DB
* 데이터를 **노드(Node)** 와 **엣지(Edge)** 로 표현
* FK로 관계를 표현하는 RDB와 달리,
  **직접적인 연결 구조로 관계 탐색 속도**가 빠르다.

**예시:** Neo4j
→ 복잡한 친구 관계, 추천 시스템, SNS 그래프 탐색에 적합

---

## 보조 개념 정리

### 1. NoSQL의 등장 배경

* RDB는 정형 데이터 중심이었으나,
  빅데이터·IoT·SNS 등으로 비정형 데이터 수요 급증.
* 빠른 확장성과 높은 유연성이 필요한 시스템을 위해 등장.

---

### 2. Eventual Consistency (최종 일관성)

NoSQL은 **즉시 일관성(Strong Consistency)** 대신
**최종 일관성(Eventual Consistency)** 을 보장한다.

> 지금 당장은 모든 노드의 데이터가 일치하지 않더라도,
> 시간이 지나면 **결국(eventually)** 일관된 상태에 도달한다.

**예시**

* YouTube 조회수
  → 실시간으로 100% 일치하지 않아도 나중에 합산 정정
* 상품 재고
  → 반드시 즉시 일관성이 필요 (강력한 일관성)

---

### 3. CAP 이론

분산 시스템에서 **3가지 특성 중 두 가지만 만족 가능.**

* **Consistency (일관성)**
  모든 노드가 같은 데이터를 가진다.
* **Availability (가용성)**
  일부 노드 장애에도 요청이 항상 응답된다.
* **Partition Tolerance (분할 허용성)**
  네트워크 장애 발생 시에도 시스템이 분할되어 작동 가능.

→ NoSQL은 대체로 **AP 또는 CP 모델**을 선택한다.
(모두 만족은 불가능)

